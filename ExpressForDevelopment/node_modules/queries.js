//Queries der ersten Iteration
exports.selectVersicherung = 'SELECT id, "personID", name, versicherungshoehe,'
  + ' beitrag, beschreibung, "abschlussZeitpunkt", "kuendigungsZeitpunkt", "istGekuendigt"'
  + ' FROM "Versicherung" WHERE id=$1;';

exports.selectVersicherungOf = 'SELECT id, "personID", name, versicherungshoehe,'
  + ' beitrag, beschreibung, "abschlussZeitpunkt", "kuendigungsZeitpunkt", "istGekuendigt"'
  + ' FROM "Versicherung" WHERE "personID"=$1;';

exports.selectVersicherungCountByPerson = 'SELECT count(*) as count FROM "Versicherung"'
  + ' WHERE "personID"=$1 GROUP BY "personID"';

exports.selectInvestition = 'SELECT id, "versicherungID", "personID", investitionshoehe,'
  + ' bewertung, "abschlussZeitpunkt", "kuendigungsZeitpunkt", "istGekuendigt"'
  + ' FROM "Investition" WHERE id=$1;';

exports.selectInvestitionOf = 'SELECT id, "versicherungID", "personID", investitionshoehe,'
  + ' bewertung, "abschlussZeitpunkt", "kuendigungsZeitpunkt", "istGekuendigt"'
  + ' FROM "Investition" WHERE "personID"=$1;';

exports.selectInvestitionen = 'SELECT id, "versicherungID", "personID", investitionshoehe,'
  + ' bewertung, "abschlussZeitpunkt", "kuendigungsZeitpunkt", "istGekuendigt"'
  + ' FROM "Investition" WHERE "versicherungID"=$1;';

exports.selectInvestorenVonVersicherung = 'SELECT "Investition"."personID"'
  + ' FROM "Versicherung" INNER JOIN "Investition"'
  + ' ON "Versicherung".id="Investition"."versicherungID" WHERE "Versicherung".id=$1;';

exports.selectInvestitionsSumVonVersicherung = 'SELECT'
  + ' sum("Investition"."investitionshoehe") as suminvestition'
  + ' FROM "Versicherung" INNER JOIN "Investition"'
  + ' ON "Versicherung".id="Investition"."versicherungID" WHERE "Versicherung".id=$1;';

exports.insertVersicherung = 'INSERT INTO "Versicherung"("personID", name,'
  + ' versicherungshoehe, beitrag, beschreibung)'
  + ' VALUES ( $1, $2, $3, $4, $5);';

exports.insertInvestition = 'INSERT INTO "Investition"("versicherungID", "personID",'
  + ' investitionshoehe)'
  + ' VALUES ($1, $2, $3);'

exports.insertZahlung = 'INSERT INTO "Zahlungsstrom"("versicherungID",'
  + ' "personID", betrag)'
  + ' VALUES ($1, $2, $3);';

exports.tranInvestieren = 'BEGIN;'
  + exports.insertInvestition
  + exports.insertZahlung
  + 'COMMIT;';

exports.bewertung = 'SELECT "versicherungID", "bewertung", COUNT("bewertung")'
  + 'FROM "Investition" WHERE "versicherungID" = $1'
  + 'GROUP BY 1,2 ORDER BY 1,2;';

exports.getPaymentrelevantInvestitions = 'SELECT "v"."id", "i"."personID", "v"."beitrag" * ("i"."invest"/"v"."versicherungshoehe") as "rendite" FROM '
  + '(SELECT "id", "personID", "beitrag", "versicherungshoehe" FROM "Versicherung" WHERE "istGekuendigt"=FALSE) "v" '
  + 'right join '
  + '(SELECT "personID", "versicherungID", sum("investitionshoehe") as "invest" FROM "Investition" WHERE "istGekuendigt"=FALSE GROUP BY "personID", "versicherungID") "i" '
  + 'on "v"."id" = "i"."versicherungID" ;'  //und "wirdGekuendigt" = false????

exports.selectActiveVersicherungAndCalculateBeitrag =
  'SELECT "v"."id", "v"."personID", "v"."versicherungshoehe", "v"."beitrag", "i"."invest", '
  + '"i"."invest"/"v"."versicherungshoehe" as "deckung", "v"."beitrag" * ("i"."invest"/"v"."versicherungshoehe") as "echterBeitrag" from '
  + '(SELECT "id", "personID", "beitrag", "versicherungshoehe" FROM "Versicherung" WHERE "istGekuendigt"=FALSE) "v" '
  + 'left join '
  + '(SELECT "versicherungID", sum("investitionshoehe") as "invest" FROM "Investition" WHERE "istGekuendigt"=FALSE GROUP BY "versicherungID") "i" '
  + 'on "v"."id" = "i"."versicherungID" ;'
